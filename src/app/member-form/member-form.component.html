<p>{{ form.get('name')?.value ? 'Edit Member' : 'Create New Member' }}</p>
<form [formGroup]="form" (ngSubmit)="sub()">

    <mat-form-field appearance="fill" style="width:100%">
        <mat-label>CIN</mat-label>
        <input matInput placeholder="cin" formControlName="cin">
    </mat-form-field>

    <mat-form-field appearance="fill" style="width:100%">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Name" formControlName="name">
    </mat-form-field>

    <mat-form-field appearance="fill" style="width:100%">
        <mat-label>Email</mat-label>
        <input matInput placeholder="Email" formControlName="email">
    </mat-form-field>

    <mat-form-field appearance="fill" style="width:100%">
        <mat-label>Type</mat-label>
        <mat-select formControlName="type">
            <mat-option value="student">Etudiant</mat-option>
            <mat-option value="enseignant">Enseignant</mat-option>
            <mat-option value="researcher">Researcher</mat-option>
            <mat-option value="admin">Admin</mat-option>
        </mat-select>
    </mat-form-field>

    <!-- Student fields -->
    <div *ngIf="form.get('type')?.value === 'student'" style="margin-top:12px">
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Niveau</mat-label>
            <input matInput formControlName="niveau" placeholder="licence/master/phd">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Encadreur (member id)</mat-label>
            <input matInput formControlName="encadreurId" placeholder="encadreur id">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Sujet de thèse</mat-label>
            <input matInput formControlName="sujetThese">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Année d'inscription</mat-label>
            <input matInput formControlName="anneeInscription" placeholder="YYYY">
        </mat-form-field>
    </div>

    <!-- Enseignant fields -->
    <div *ngIf="form.get('type')?.value === 'enseignant'" style="margin-top:12px">
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Grade</mat-label>
            <input matInput formControlName="grade">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Departement</mat-label>
            <input matInput formControlName="departement">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Laboratoire</mat-label>
            <input matInput formControlName="laboratoire">
        </mat-form-field>
        <mat-form-field appearance="fill" style="width:100%">
            <mat-label>Specialites (comma separated)</mat-label>
            <input matInput formControlName="specialites">
        </mat-form-field>
    </div>

        <div style="margin-top:12px">
        <button mat-raised-button color="primary" type="submit" [disabled]="form.invalid">Save</button>
        <button mat-button type="button" [routerLink]="['/member']">Cancel</button>
    </div>

</form>

